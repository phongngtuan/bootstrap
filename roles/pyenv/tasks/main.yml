---
- name: Clone pyenv
  git:
    repo: https://github.com/pyenv/pyenv.git
    dest: "{{ pyenv_root }}"

- name: Clone pyenv-virtualenv
  git:
    repo: https://github.com/pyenv/pyenv-virtualenv.git
    dest: "{{ pyenv_root }}/plugins/pyenv-virtualenv"

- name: Install Python interpreters
  shell: >-
    export PATH="{{ pyenv_root }}/bin:$PATH" &&
    eval "$(pyenv init -)" &&
    eval "$(pyenv-virtualenv init -)" &&
    pyenv install 3.7.4 &&
    pyenv virtualenv 3.7.4 neovim3

- name: Install neovim module
  shell: >-
    export PATH="{{ pyenv_root }}/bin:$PATH" &&
    eval "$(pyenv init -)" &&
    eval "$(pyenv-virtualenv init -)" &&
    pyenv activate neovim3
    pip install pynvim
